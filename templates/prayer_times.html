{% extends "base.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/prayer_reminders.css') }}">
{% endblock %}

{% block content %}
<div class="prayer-container">
    <div class="prayer-header">
        <div class="location-info">
            <div class="location-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path><circle cx="12" cy="10" r="3"></circle></svg>
            </div>
            <div class="location-text">
                <h2 id="location-name">Loading...</h2>
                <p id="current-date">Loading...</p>
            </div>
        </div>
        <div class="next-prayer">
            <h3>Next Prayer</h3>
            <div class="countdown">
                <span id="next-prayer-name">--</span>
                <span id="time-remaining">--:--</span>
            </div>
        </div>
    </div>
    
    <div class="prayer-times-grid">
        <div class="prayer-card fajr">
            <div class="prayer-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2v8"></path><path d="m4.93 10.93 1.41 1.41"></path><path d="M2 18h2"></path><path d="M20 18h2"></path><path d="m19.07 10.93-1.41 1.41"></path><path d="M22 22H2"></path><path d="m8 6 4-4 4 4"></path><path d="M16 18a4 4 0 0 0-8 0"></path></svg>
            </div>
            <div class="prayer-info">
                <h3>Fajr</h3>
                <p id="fajr-time" data-raw-time="">--:--</p>
            </div>
        </div>
        <div class="prayer-card sunrise">
            <div class="prayer-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg>
            </div>
            <div class="prayer-info">
                <h3>Sunrise</h3>
                <p id="sunrise-time" data-raw-time="">--:--</p>
            </div>
        </div>
        <div class="prayer-card dhuhr">
            <div class="prayer-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M12 6v6l4 2"></path></svg>
            </div>
            <div class="prayer-info">
                <h3>Dhuhr</h3>
                <p id="dhuhr-time" data-raw-time="">--:--</p>
            </div>
        </div>
        <div class="prayer-card asr">
            <div class="prayer-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 17h1m16 0h1M3 12h1m16 0h1M3 7h1m16 0h1"></path><circle cx="12" cy="12" r="4"></circle></svg>
            </div>
            <div class="prayer-info">
                <h3>Asr</h3>
                <p id="asr-time" data-raw-time="">--:--</p>
            </div>
        </div>
        <div class="prayer-card maghrib">
            <div class="prayer-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 10V2"></path><path d="m4.93 10.93 1.41 1.41"></path><path d="M2 18h2"></path><path d="M20 18h2"></path><path d="m19.07 10.93-1.41 1.41"></path><path d="M22 22H2"></path><path d="M16 18a4 4 0 0 0-8 0"></path></svg>
            </div>
            <div class="prayer-info">
                <h3>Maghrib</h3>
                <p id="maghrib-time" data-raw-time="">--:--</p>
            </div>
        </div>
        <div class="prayer-card isha">
            <div class="prayer-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg>
            </div>
            <div class="prayer-info">
                <h3>Isha</h3>
                <p id="isha-time" data-raw-time="">--:--</p>
            </div>
        </div>
    </div>
    
    <div class="reminder-settings-container">
        <div class="reminder-settings-header">
            <div class="reminder-settings-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5H5c-.55 0-1 .45-1 1s.45 1 1 1h14c.55 0 1-.45 1-1s-.45-1-1-1h-1zm-2 0H8v-5c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v5z"></path></svg>
                Prayer Reminders
            </div>
            <span id="reminders-status" class="status-inactive">Prayer reminders are disabled</span>
            <button id="toggle-reminder-settings" class="reminder-toggle-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg>
                Manage Reminders
            </button>
        </div>
        
        <div id="reminder-settings-panel" class="reminder-settings-panel">
            <div class="notification-permission-container">
                <span id="notification-permission-status" class="status-inactive">Notification permission required</span>
                <button id="request-notification-permission">Allow Notifications</button>
            </div>
            
            <div class="reminder-actions">
                <div class="reminder-actions-buttons">
                    <button id="enable-all-reminders" class="reminder-toggle-button">Enable All</button>
                    <button id="disable-all-reminders" class="reminder-toggle-button">Disable All</button>
                </div>
                <button id="test-notification">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.73 18l-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                    Test Notification
                </button>
            </div>
            
            <div class="prayer-reminders-grid">
                <div class="prayer-reminder-item fajr">
                    <div class="prayer-reminder-header">
                        <span class="prayer-name">Fajr</span>
                        <label class="toggle-switch">
                            <input type="checkbox" class="prayer-reminder-toggle" data-prayer="fajr">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="reminder-settings-row">
                        <span class="reminder-settings-label">Remind before:</span>
                        <select class="reminder-minutes-select" data-prayer="fajr">
                            <option value="5">5 minutes</option>
                            <option value="10">10 minutes</option>
                            <option value="15">15 minutes</option>
                            <option value="20">20 minutes</option>
                            <option value="30" selected>30 minutes</option>
                            <option value="45">45 minutes</option>
                            <option value="60">1 hour</option>
                        </select>
                    </div>
                    <div class="reminder-settings-row">
                        <span class="reminder-settings-label">Sound:</span>
                        <select class="reminder-sound-select" data-prayer="fajr">
                            <option value="adhan1" selected>Adhan 1</option>
                            <option value="adhan2">Adhan 2</option>
                            <option value="beep">Simple Beep</option>
                            <option value="none">Silent</option>
                        </select>
                    </div>
                </div>
                
                <div class="prayer-reminder-item sunrise">
                    <div class="prayer-reminder-header">
                        <span class="prayer-name">Sunrise</span>
                        <label class="toggle-switch">
                            <input type="checkbox" class="prayer-reminder-toggle" data-prayer="sunrise">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="reminder-settings-row">
                        <span class="reminder-settings-label">Remind before:</span>
                        <select class="reminder-minutes-select" data-prayer="sunrise">
                            <option value="5">5 minutes</option>
                            <option value="10">10 minutes</option>
                            <option value="15" selected>15 minutes</option>
                            <option value="20">20 minutes</option>
                            <option value="30">30 minutes</option>
                        </select>
                    </div>
                    <div class="reminder-settings-row">
                        <span class="reminder-settings-label">Sound:</span>
                        <select class="reminder-sound-select" data-prayer="sunrise">
                            <option value="adhan1" selected>Adhan 1</option>
                            <option value="adhan2">Adhan 2</option>
                            <option value="beep">Simple Beep</option>
                            <option value="none">Silent</option>
                        </select>
                    </div>
                </div>
                
                <div class="prayer-reminder-item dhuhr">
                    <div class="prayer-reminder-header">
                        <span class="prayer-name">Dhuhr</span>
                        <label class="toggle-switch">
                            <input type="checkbox" class="prayer-reminder-toggle" data-prayer="dhuhr">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="reminder-settings-row">
                        <span class="reminder-settings-label">Remind before:</span>
                        <select class="reminder-minutes-select" data-prayer="dhuhr">
                            <option value="5">5 minutes</option>
                            <option value="10">10 minutes</option>
                            <option value="15" selected>15 minutes</option>
                            <option value="20">20 minutes</option>
                            <option value="30">30 minutes</option>
                        </select>
                    </div>
                    <div class="reminder-settings-row">
                        <span class="reminder-settings-label">Sound:</span>
                        <select class="reminder-sound-select" data-prayer="dhuhr">
                            <option value="adhan1" selected>Adhan 1</option>
                            <option value="adhan2">Adhan 2</option>
                            <option value="beep">Simple Beep</option>
                            <option value="none">Silent</option>
                        </select>
                    </div>
                </div>
                
                <div class="prayer-reminder-item asr">
                    <div class="prayer-reminder-header">
                        <span class="prayer-name">Asr</span>
                        <label class="toggle-switch">
                            <input type="checkbox" class="prayer-reminder-toggle" data-prayer="asr">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="reminder-settings-row">
                        <span class="reminder-settings-label">Remind before:</span>
                        <select class="reminder-minutes-select" data-prayer="asr">
                            <option value="5">5 minutes</option>
                            <option value="10">10 minutes</option>
                            <option value="15" selected>15 minutes</option>
                            <option value="20">20 minutes</option>
                            <option value="30">30 minutes</option>
                        </select>
                    </div>
                    <div class="reminder-settings-row">
                        <span class="reminder-settings-label">Sound:</span>
                        <select class="reminder-sound-select" data-prayer="asr">
                            <option value="adhan1" selected>Adhan 1</option>
                            <option value="adhan2">Adhan 2</option>
                            <option value="beep">Simple Beep</option>
                            <option value="none">Silent</option>
                        </select>
                    </div>
                </div>
                
                <div class="prayer-reminder-item maghrib">
                    <div class="prayer-reminder-header">
                        <span class="prayer-name">Maghrib</span>
                        <label class="toggle-switch">
                            <input type="checkbox" class="prayer-reminder-toggle" data-prayer="maghrib">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="reminder-settings-row">
                        <span class="reminder-settings-label">Remind before:</span>
                        <select class="reminder-minutes-select" data-prayer="maghrib">
                            <option value="5">5 minutes</option>
                            <option value="10" selected>10 minutes</option>
                            <option value="15">15 minutes</option>
                            <option value="20">20 minutes</option>
                            <option value="30">30 minutes</option>
                        </select>
                    </div>
                    <div class="reminder-settings-row">
                        <span class="reminder-settings-label">Sound:</span>
                        <select class="reminder-sound-select" data-prayer="maghrib">
                            <option value="adhan1" selected>Adhan 1</option>
                            <option value="adhan2">Adhan 2</option>
                            <option value="beep">Simple Beep</option>
                            <option value="none">Silent</option>
                        </select>
                    </div>
                </div>
                
                <div class="prayer-reminder-item isha">
                    <div class="prayer-reminder-header">
                        <span class="prayer-name">Isha</span>
                        <label class="toggle-switch">
                            <input type="checkbox" class="prayer-reminder-toggle" data-prayer="isha">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="reminder-settings-row">
                        <span class="reminder-settings-label">Remind before:</span>
                        <select class="reminder-minutes-select" data-prayer="isha">
                            <option value="5">5 minutes</option>
                            <option value="10">10 minutes</option>
                            <option value="15" selected>15 minutes</option>
                            <option value="20">20 minutes</option>
                            <option value="30">30 minutes</option>
                        </select>
                    </div>
                    <div class="reminder-settings-row">
                        <span class="reminder-settings-label">Sound:</span>
                        <select class="reminder-sound-select" data-prayer="isha">
                            <option value="adhan1" selected>Adhan 1</option>
                            <option value="adhan2">Adhan 2</option>
                            <option value="beep">Simple Beep</option>
                            <option value="none">Silent</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/Base.js') }}"></script>
<script src="{{ url_for('static', filename='js/prayer_time.js') }}"></script>
<script src="{{ url_for('static', filename='js/prayer_reminders.js') }}"></script>

{% endblock %}